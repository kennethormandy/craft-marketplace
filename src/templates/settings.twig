{#
/**
 * @link      https://github.com/kennethormandy/craft-marketplace
 * @package   Marketplace
 * @since     0.2.0
 */
#}

{% import "_includes/forms" as forms %}
{# @var craft \craft\web\twig\variables\CraftVariable #}

{{ forms.autosuggestField({
    label: 'Stripe Secret Key',
    instructions: 'The Stripe secret API key for the parent Stripe account, that other Stripe accounts will be connected to.',
    id: 'secretApiKey',
    name: 'secretApiKey',
    class: 'code',
    placeholder: 'sk_live_AaAaAaAaAaAaAaAaAaAaAaAa',
    value: settings.secretApiKey,
    suggestEnvVars: true
  })
}}

{% if supportedApps is not defined or not supportedApps %}
  {% set socialLoginEditUrl = "social-login/settings/providers/edit/#{providerHandle}" %}
  <a href="{{ cpUrl(socialLoginEditUrl) }}" class="btn submit add icon">
    {{ 'Configure Stripe Express in Social Login'|t }}
  </a>
{% else %}
  {{ forms.selectField({
    label: 'Stripe OAuth App',
    instructions: '',
    id: 'appHandle',
    name: 'appHandle',
    options: supportedApps|map((obj) => { label: "#{obj.name} (#{obj.handle})", value: obj.handle })
  }) }}

{% endif %}
