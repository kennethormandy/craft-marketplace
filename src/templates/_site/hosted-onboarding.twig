<form method="POST" accept-charset="UTF-8" target="_blank" {{- attr(themeConfig.form.attributes) -}}>
  {{ csrfInput() }}
  {% if old|default(false) %}
    {{ actionInput('marketplace/auth/connect') }}
  {% else %}
    {{ actionInput('marketplace/accounts/create') }}
  {% endif %}

  {% if elementUid %}
    {{ hiddenInput('elementUid', elementUid, { type: 'hidden' }) }}
  {% endif %}

  {# Customize the redirect, when applicable. Otherwise, defaults to the same page. #}
  {% if params.redirect %}
    {{ redirectInput(redirect, { type: 'hidden' }) }}
  {% endif %}

  <button type="submit" data-test="connect" {{- attr(themeConfig.submitButton.attributes) -}}>
    {{ 'Connect'|t('marketplace') }}
  </button>

  {# A single error message, same as the default Craft CMS login form. #}
  <div {{- attr(themeConfig.errors.attributes) -}}>
    {% if errorMessage is defined %}
      <p>{{ errorMessage }}</p>
    {% endif %}
  </div>
</form>
